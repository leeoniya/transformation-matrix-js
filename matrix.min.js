/*
 * Transformation Matrix JS v1.5 (c) Epistemex 2014
 * www.epistemex.com
 * License: MIT, this header required.
*/
function Matrix(t){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.context=t||null,t&&t.setTransform(1,0,0,1,0,0)}Matrix.prototype={flipX:function(){return this.transform(-1,0,0,1,0,0),this},flipY:function(){return this.transform(1,0,0,-1,0,0),this},reset:function(){return this.a=this.d=1,this.b=this.c=this.e=this.f=0,this._setCtx(),this},rotate:function(t){var i=Math.cos(t),s=Math.sin(t);return this.transform(i,s,-s,i,0,0),this},rotateDeg:function(t){return this.rotate(.017453292519943295*t),this},scale:function(t,i){return this.transform(t,0,0,i,0,0),this},scaleX:function(t){return this.transform(t,0,0,1,0,0),this},scaleY:function(t){return this.transform(1,0,0,t,0,0),this},skew:function(t,i){return this.transform(1,i,t,1,0,0),this},skewX:function(t){return this.transform(1,0,t,1,0,0),this},skewY:function(t){return this.transform(1,t,0,1,0,0),this},setTransform:function(t,i,s,h,n,r){return this.a=t,this.b=i,this.c=s,this.d=h,this.e=n,this.f=r,this._setCtx(),this},translate:function(t,i){return this.transform(1,0,0,1,t,i),this},translateX:function(t){return this.transform(1,0,0,1,t,0),this},translateY:function(t){return this.transform(1,0,0,1,0,t),this},transform:function(t,i,s,h,n,r){var e=this.a,a=this.b,o=this.c,u=this.d,f=this.e,c=this.f;return this.a=e*t+o*i,this.b=a*t+u*i,this.c=e*s+o*h,this.d=a*s+u*h,this.e=e*n+o*r+f,this.f=a*n+u*r+c,this._setCtx(),this},getInverse:function(){var t=this.a,i=this.b,s=this.c,h=this.d,n=this.e,r=this.f,e=new Matrix,a=t*h-i*s;return e.a=h/a,e.b=-i/a,e.c=-s/a,e.d=t/a,e.e=(s*r-h*n)/a,e.f=-(t*r-i*n)/a,e},interpolate:function(t,i){var s=new Matrix;return s.a=this.a+(t.a-this.a)*i,s.b=this.b+(t.b-this.b)*i,s.c=this.c+(t.c-this.c)*i,s.d=this.d+(t.d-this.d)*i,s.e=this.e+(t.e-this.e)*i,s.f=this.f+(t.f-this.f)*i,s},applyToPoint:function(t,i){return{x:t*this.a+i*this.c+this.e,y:t*this.b+i*this.d+this.f}},applyToArray:function(t){var i,s,h=0,n=[];if("number"==typeof t[0])for(s=t.length;h<s;)i=this.applyToPoint(t[h++],t[h++]),n.push(i.x,i.y);else for(;i=t[h];h++)n.push(this.applyToPoint(i.x,i.y));return n},applyToTypedArray:function(t){for(var i,s=0,h=t.length,n=new Float32Array(h);s<h;)i=this.applyToPoint(t[s],t[s+1]),n[s++]=i.x,n[s++]=i.y;return n},applyToContext:function(t){return t.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),this},clone:function(){return cloned=new Matrix,cloned.a=this.a,cloned.b=this.b,cloned.c=this.c,cloned.d=this.d,cloned.e=this.e,cloned.f=this.f,cloned},isIdentity:function(){return this._isEqual(this.a,1)&&this._isEqual(this.b,0)&&this._isEqual(this.c,0)&&this._isEqual(this.d,1)&&this._isEqual(this.e,0)&&this._isEqual(this.f,0)},isEqual:function(t){return this._isEqual(this.a,t.a)&&this._isEqual(this.b,t.b)&&this._isEqual(this.c,t.c)&&this._isEqual(this.d,t.d)&&this._isEqual(this.e,t.e)&&this._isEqual(this.f,t.f)},_isEqual:function(t,i){return Math.abs(t-i)<1e-14},_setCtx:function(){this.context&&this.context.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)}};